# Booking Site Backend

Проєкт представляє собою бекенд для сайту бронювання з каталогом товарів/послуг, системою бронювання, тарифами, відгуками та контактною інформацією.

## Технологічний стек

- **Backend**: Node.js, Express.js
- **База даних**: PostgreSQL
- **ORM**: Prisma
- **Аутентифікація**: JWT

## Інструкція з установки та запуску (Windows)

### Попередні вимоги 

- Node.js (версія 14.x або вище)
- npm (версія 6.x або вище)
- PostgreSQL (має бути вже встановлений)

### Крок 1: Створення бази даних

1. Відкрий командну стрічку або PowerShell
2. Ввійди у PostgreSQL:
   ```
   psql -U postgres
   ```
   (Введи пароль, якщо буде відповідний запит)
3. Створи базу даних:
   ```sql
   CREATE DATABASE booking_db;
   ```
4. Вийди з PostgreSQL:
   ```
   \q
   ```

### Крок 2: Налаштування проєкту

1. Розпакуй проєкт у необхідну директорію
2. Відкрий командну стрічку та перейди у директорію проєкту:
   ```
   cd шлях\до\booking-site-backend
   ```
3. Завантаж залежності:
   ```
   npm install
   ```
4. Відредагуй файл `.env`, встановив правильні параметри підключення до бази даних:
   ```
   DATABASE_URL=postgresql://postgres:твій_пароль@localhost:5432/booking_db?schema=public
   ```

### Крок 3: Міграція бази даних

Виконай міграцію для створення таблиць у базі даних:
```
npx prisma migrate dev --name init
```

### Крок 4: Запуск проєкту

Для запуску у режимі розробника:
```
npm run dev
```

Твій сервер буде доступним за адресою: http://localhost:5000

### Перевірка працездатності

Відкрий браузер або використай інструмент типу Postman та виконай запит:
```
GET http://localhost:5000/health
```

Маєш отримати відповідь з повідомленням, що API працює нормально.

## Додаткові команди

Для перегляду схеми бази даних у зручному інтерфейсі використай:
```
npx prisma studio
```

Це відкриє інтерфейс Prisma Studio у браузері на порту 5555, де можна переглядати та редагувати дані.

## Структура API

Основні ендпоінти API:

- `/api/auth` - аутентифікація та управління користувачами
- `/api/catalog` - управління елементами каталогу
- `/api/profile` - перегляд інформації профайлу
- `/api/reviews` - відгуки
- `/api/contacts` - контактна інформація

## Структура beckend: 

```
backend/
├── src/
│   ├── config/           # Конфігурація програми
│   ├── controllers/      # Контролери для обробки запитів
│   ├── middlewares/      # Проміжне ПЗ (авторизація, перевірка токену доступу(JWT) тощо)
│   ├── models/           # Моделі Prisma
│   ├── routes/           # Маршрути API
│   ├── services/         # Бізнес-логіка
│   ├── utils/            # Допоміжні утиліти (валідації для різних запитів)
│   ├── app.js            # Налаштування Express програми
│   └── server.js         # Точка входу до програми
├── prisma/
│   ├── schema.prisma     # Схема Prisma
│   └── migrations/       # Міграції бази даних
├── .env                  # Змінні оточення
├── .env.example          # Приклад файлу оточення
├── .eslintrc.js          # Установки ESLint
├── .gitignore            # Ігноровані Git файли
├── jest.config.js        # Налаштування Jest
├── package.json          # Залежності проєкту
└── README.md             # Допоміжна інформація проєкту
```
